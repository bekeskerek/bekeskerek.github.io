var paralax_module=angular.module("paralax",[]);paralax_module.directive("paralaxTrack",["$rootScope","$timeout",function(e,n){function t(e,t,l){function i(){var l=t[0],i=l.getBoundingClientRect(),c=window.innerHeight,p=angular.copy(h);h.top=i.top,h.topPercent=i.top/c*100,h.bottom=i.bottom,h.bottomPercent=i.bottom/c*100,h.isIn=h.topPercent>=0&&h.topPercent<100||h.bottomPercent>=0&&h.bottomPercent<100||h.topPercent<=0&&h.bottomPercent>100,h.middle=i.top+(i.bottom-i.top)/2,h.middlePercent=h.middle/c*100,h.inPercent=i.bottom/(c+i.height)*100,h.height=l.clientHeight,h.isIn?r():t.hasClass(a.paralaxIn)&&s(),d(h),angular.equals(p,h)||(e.$broadcast(o.change,h),n(function(){angular.copy(h,e.paralax)}))}function r(){s(),h.isIn&&(t.addClass(a.paralaxIn),t.addClass(a.paralaxIn+"-"+(0|h.inPercent))),h.topPercent>0&&h.topPercent<100&&(t.addClass(a.paralaxTopIn),t.addClass(a.paralaxTopIn+"-"+(0|h.topPercent))),h.bottomPercent>0&&h.bottomPercent<100&&(t.addClass(a.paralaxBottomIn),t.addClass(a.paralaxBottomIn+"-"+(0|h.bottomPercent)))}function s(){var e,n,o,l=t[0];for(e=l.className.split(" "),o=e.length-1;o>=0;o--)n=e[o],0!==n.indexOf(a.paralaxIn)&&0!==n.indexOf(a.paralaxTopIn)&&0!==n.indexOf(a.paralaxBottomIn)||e.splice(o,1);l.className=e.join(" ")}function d(e){t[0].querySelectorAll("[paralax-layer]").forEach(function(n){var t,a=parseInt(n.getAttribute("paralax-layer"))/100,o=0,l=n.getAttribute("paralax-size"),i=n.getAttribute("paralax-offset");"window"==l&&(n.style.height=window.innerHeight+"px"),i&&("%"==i.charAt(i.length-1)?o=parseFloat(i)/100:"x"==i.charAt(i.length-1)&&(o=parseFloat(i)/window.innerHeight)),t=(window.innerHeight-e.height)*o,n.style.transform="translate3d(0px, "+((e.top-t)*a+"px")+", 0px)"})}function c(){m&&(m=!1,i()),u(c)}function p(e){m=!0}t.addClass("paralaxTrack");var m=!1,u=window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,n){window.setTimeout(e,1e3/60)}}(),h={};u(c),window.addEventListener?window.addEventListener("scroll",p,!1):el.attachEvent&&window.attachEvent("onscroll",p)}var a={paralaxIn:"px-in",paralaxTopIn:"px-top-in",paralaxBottomIn:"px-bottom-in"},o={change:"paralaxChange"};return{restrict:"A",link:t,scope:!0,controller:["$scope",function(n){e.paralax=e.paralax||{move:function(e,n){var t=document.getElementById(n),a=t.getBoundingClientRect();window.scrollTo(0,a.top)}}}]}}]);var module=angular.module("app-module",["paralax"]);module.controller("mainCtrl",["$scope","$filter","$location","$translate","$routeParams",function(e,n,t,a,o){function l(e){"en"==e?window.location.pathname="/":window.location.pathname="/"+e}e.model={langs:[{id:"en",label:"EN",rel:"/"},{id:"hu",label:"HU",rel:"/hu"},{id:"ru",label:"RU",rel:"/ru"}],lang:null};var i=document.querySelector("html").getAttribute("lang");e.model.lang=e.model.langs.filter(function(e){return e.id==i})[0],e.changeLang=function(e){l(e)}}]),module.directive("app",[function(){function e(e,n,t){n.addClass("app")}return{restrict:"A",link:e,scope:!1,controller:["$scope",function(e){}]}}]),module.directive("spoke",["$compile",function(e){function n(n,t,a){function o(){n.canvas.width=t[0].offsetWidth,n.canvas.height=t[0].offsetHeight,n.draw(),angular.element(document.querySelector(".inputs")).css({position:"absolute",bottom:"16px",left:"50px",color:"rgba(255,255,255,0.7)","font-family":"'Roboto Slab',serif"}),t.find("input").css({"background-color":"rgba(0,0,0,0)",border:"1px solid currentColor",width:"50px","text-align":"center"})}t.addClass("spoke"),t.css({width:"100%",height:"300px"}),t.html('<canvas id="spoke-'+n.$id+'" class="canvas"></canvas><span class="title">The Spoke</span><div class="inputs"><label class="l l2" ng-show="spoke.a != 0">L: <input ng-model="spoke.l2" ng-change="draw()" type="number" min="40" max="1000">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="l l1" ng-show="spoke.a == 0">L: <input ng-model="spoke.l1" ng-change="draw()" type="number" min="40" max="1000">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="d">D: <input ng-model="spoke.d0" ng-change="draw()" type="number" min="2.5" max="4.5" step="0.5">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="a">A: <input ng-model="spoke.a" ng-change="draw()" type="number" min="0" max="120">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="b" ng-show="spoke.a!=0">B: <input ng-model="spoke.n" ng-change="draw()" type="number" min="3" max="30">&nbsp;mm</label> </div>'),e(t.contents())(n),n.canvas=t.find("canvas")[0],n.$on("$destroy",function(){angular.element(window).off("resize",o)}),angular.element(window).on("resize",o),o()}return{restrict:"A",link:n,scope:{},controller:["$scope",function(e){function n(){var e=document.createElement("div");e.style.width="1in",document.body.appendChild(e);var n=e.offsetWidth;return document.body.removeChild(e),n}function t(e,t){function i(e,n,t,a){var i,e,n,r,s,d,c,p,m,u,h,f,g,b,x=3.8,v={},T=t.t/2*x/(t.tn+1);for(w.moveTo(e,n),w.lineWidth=1,i=1;i<2*t.tn+1;i++)r=T,s=t.t0*x*(i%2),e+=r,w.lineTo(e,n-s);for(e=e+t.l*x-t.t*x,w.lineTo(e,n+s),u=t.r*x,h=(t.r+t.d0)*x,d=p=e,c=m=n-u,f=l(90),b=!0,g=l(90-t.a),w.arc(d,c,u,f,g,b),v=o(d,c,e,n,l(t.a),b),d=v.x,c=v.y,v=o(d,c,d+t.n*x,c,l(t.a),b),w.lineTo(v.x,v.y),e=d+t.f*x+t.n*x,n=c-t.f*x,v=o(d,c,e,n,l(t.a),b),w.lineTo(v.x,v.y),n=n+t.f*x+t.d0*x+t.f*x,v=o(d,c,e,n,l(t.a),b),w.lineTo(v.x,v.y),e-=t.f*x,n-=t.f*x,v=o(d,c,e,n,l(t.a),b),w.lineTo(v.x,v.y),e-=t.n*x,v=o(d,c,e,n,l(t.a),b),w.lineTo(v.x,v.y),f=l(90),b=!0,g=l(90-t.a),w.arc(p,m,h,g,f,!b),e=p,n=m+h,e=e-t.l*x+t.t*x,w.lineTo(e,n+s),i=1;i<2*t.tn+1;i++)r=T,s=t.t0*x*(i%2),e-=r,w.lineTo(e,n+s)}var r,s,d,c,p,m,u,h,f,g,b,x,v=n()/25.4;0===t.a&&(t.l2=t.l1),t.l2>(e.width-200)/v?(t.l=(e.width-200)/v,h=!0):(t.l=t.l2,h=!1),0===t.a?(t.l-=t.n+t.f,f=!0):f=!1,r=50,s=150;var w=e.getContext("2d");w.clearRect(0,0,e.width,e.height),w.strokeStyle="#ffffff",w.lineWidth=1,w.setLineDash([]),w.beginPath(),i(r,s,t,f),w.closePath();var T=a(w);w.fillStyle=T,w.fill(),w.stroke();var y="#054f79";h&&(w.beginPath(),w.strokeStyle=y,w.lineWidth=1,r=50+t.l*v/2,s=150,w.moveTo(r,s),s-=1,w.lineTo(r,s),r+=20,w.lineTo(r,s),r+=t.d0*v/2,s+=t.d0*v/2+1,w.lineTo(r,s),r-=t.d0*v/2,s+=t.d0*v/2+1,w.lineTo(r,s),r-=20,w.lineTo(r,s),r+=t.d0*v/2,s-=t.d0*v/2-1,w.lineTo(r,s),r-=t.d0*v/2,s-=t.d0*v/2-1,w.lineTo(r,s),w.stroke(),w.fillStyle=y,w.fill(),w.closePath(),w.beginPath(),w.strokeStyle="white",w.lineWidth=1,r=50+t.l*v/2+20,s=150,w.moveTo(r,s),r+=t.d0*v/2,s+=t.d0*v/2,w.lineTo(r,s),r-=t.d0*v/2,s+=t.d0*v/2,w.lineTo(r,s),r-=20,w.moveTo(r,s),r+=t.d0*v/2,s-=t.d0*v/2,w.lineTo(r,s),r-=t.d0*v/2,s-=t.d0*v/2,w.lineTo(r,s),w.stroke(),w.closePath()),w.beginPath(),w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,r=50,s=150,c=s+t.d0*v+30,w.moveTo(r,c),f?(d=r+(t.l+t.n+t.f)*v,w.lineTo(d,c)):(d=r+t.l*v,w.lineTo(d,c)),c-=5,w.moveTo(r,c),c+=10,w.lineTo(r,c),c-=10,w.moveTo(d,c),c+=10,w.lineTo(d,c),f||(r+=t.l*v,s=s+t.d0*v+30,d=p=r,m=s,c=s-(t.d0+t.r)*v-30,u=o(d,c,r,s,l(t.a),!0),w.moveTo(u.x,u.y),r+=t.n*v,u=o(d,c,r,s,l(t.a),!0),w.lineTo(u.x,u.y),r=p,s=m-5,u=o(d,c,r,s,l(t.a),!0),w.moveTo(u.x,u.y),r=p,s=m+5,u=o(d,c,r,s,l(t.a),!0),w.lineTo(u.x,u.y),r=p+t.n*v,s=m-5,u=o(d,c,r,s,l(t.a),!0),w.moveTo(u.x,u.y),s=m+5,u=o(d,c,r,s,l(t.a),!0),w.lineTo(u.x,u.y)),w.stroke(),w.closePath(),w.beginPath(),w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,w.setLineDash([4,4]),r=50,s=150,w.moveTo(r,s+t.d0*v),w.lineTo(r,s+t.d0*v+30),f?(d=r+(t.l+t.n+t.f)*v,w.moveTo(d,s+t.d0*v),w.lineTo(d,s+t.d0*v+30)):(d=r+t.l*v,w.moveTo(d,s+t.d0*v),w.lineTo(d,s+t.d0*v+50),r+=t.l*v,s+=t.d0*v,d=p=r,m=s,c=s-(t.d0+t.r)*v,g=l(90),x=!0,b=l(90-t.a),w.arc(d,c,(t.d0+t.r)*v+50,g,b,x),u=o(d,c,r,s,l(t.a),!0),w.moveTo(u.x,u.y),u=o(d,c,r,s+50,l(t.a),!0),w.lineTo(u.x,u.y),u=o(d,c,r+t.n*v,s+30,l(t.a),!0),w.moveTo(u.x,u.y),u=o(d,c,r+t.n*v,s,l(t.a),!0),w.lineTo(u.x,u.y)),w.stroke(),w.closePath()}function a(e){var n,t=document.createElement("canvas"),a=5,o=5;for(document.body.appendChild(t),t.width=20,t.height=20,n=t.getContext("2d"),n.beginPath(),n.strokeStyle="rgba(255,255,255,0.2)";o<2*t.width;)n.moveTo(o,0),n.lineTo(0,o),o+=a;n.stroke(),n.closePath();var l=e.createPattern(t,"repeat");return document.body.removeChild(t),l}function o(e,n,t,a,o,l){var i={x:null,y:null},r=t-e,s=a-n,d=Math.cos(o),c=Math.sin(o);return l?(i.x=r*d+s*c,i.y=s*d+r*c*-1):(i.x=r*d-s*c,i.y=s*d+r*c),i.x+=e,i.y+=n,i}function l(e){return e*(Math.PI/180)}e.spoke={l:null,l1:210,l2:200,n:10,d0:4,d1:4,a:45,t:20,tn:16,t0:.6,b1:0,b2:0,r:1,f:1.5},e.draw=function(){t(e.canvas,e.spoke)}}]}}]),function(){"use strict";var e=angular.module("app",["ngRoute","ngSanitize","app-module","pascalprecht.translate"]);e.config(["$translateProvider","$routeProvider","$locationProvider",function(e,n,t){e.useStaticFilesLoader({prefix:"./data/",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("sanitizeParameters")}]),angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}();