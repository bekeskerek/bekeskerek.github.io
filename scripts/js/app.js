var paralax_module=angular.module("paralax",[]);paralax_module.directive("paralaxTrack",["$rootScope","$timeout",function(e,n){function t(e,t,l){function i(){var l=t[0],i=l.getBoundingClientRect(),c=window.innerHeight,p=angular.copy(h);h.top=i.top,h.topPercent=i.top/c*100,h.bottom=i.bottom,h.bottomPercent=i.bottom/c*100,h.isIn=h.topPercent>=0&&h.topPercent<100||h.bottomPercent>=0&&h.bottomPercent<100||h.topPercent<=0&&h.bottomPercent>100,h.middle=i.top+(i.bottom-i.top)/2,h.middlePercent=h.middle/c*100,h.inPercent=i.bottom/(c+i.height)*100,h.height=l.clientHeight,h.isIn?r():t.hasClass(o.paralaxIn)&&d(),s(h),angular.equals(p,h)||(e.$broadcast(a.change,h),n(function(){angular.copy(h,e.paralax)}))}function r(){d(),h.isIn&&(t.addClass(o.paralaxIn),t.addClass(o.paralaxIn+"-"+(0|h.inPercent))),h.topPercent>0&&h.topPercent<100&&(t.addClass(o.paralaxTopIn),t.addClass(o.paralaxTopIn+"-"+(0|h.topPercent))),h.bottomPercent>0&&h.bottomPercent<100&&(t.addClass(o.paralaxBottomIn),t.addClass(o.paralaxBottomIn+"-"+(0|h.bottomPercent)))}function d(){var e,n,a,l=t[0];for(e=l.className.split(" "),a=e.length-1;a>=0;a--)n=e[a],0!==n.indexOf(o.paralaxIn)&&0!==n.indexOf(o.paralaxTopIn)&&0!==n.indexOf(o.paralaxBottomIn)||e.splice(a,1);l.className=e.join(" ")}function s(e){t[0].querySelectorAll("[paralax-layer]").forEach(function(n){var t,o=parseInt(n.getAttribute("paralax-layer"))/100,a=0,l=n.getAttribute("paralax-size"),i=n.getAttribute("paralax-offset");"window"==l&&(n.style.height=window.innerHeight+"px"),i&&("%"==i.charAt(i.length-1)?a=parseFloat(i)/100:"x"==i.charAt(i.length-1)&&(a=parseFloat(i)/window.innerHeight)),t=(window.innerHeight-e.height)*a,n.style.transform="translate3d(0px, "+((e.top-t)*o+"px")+", 0px)"})}function c(){m&&(m=!1,i()),u(c)}function p(e){m=!0}t.addClass("paralaxTrack");var m=!1,u=window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,n){window.setTimeout(e,1e3/60)}}(),h={};u(c),window.addEventListener?window.addEventListener("scroll",p,!1):el.attachEvent&&window.attachEvent("onscroll",p)}var o={paralaxIn:"px-in",paralaxTopIn:"px-top-in",paralaxBottomIn:"px-bottom-in"},a={change:"paralaxChange"};return{restrict:"A",link:t,scope:!0,controller:["$scope",function(n){e.paralax=e.paralax||{move:function(e,n){var t=document.getElementById(n),o=t.getBoundingClientRect();window.scrollTo(0,o.top)}}}]}}]);var module=angular.module("app-module",["paralax"]);module.controller("mainCtrl",["$scope",function(e){function n(e){"en"==e?window.location.pathname="/":window.location.pathname="/"+e}e.model={langs:[{id:"en",label:"EN",rel:"/"},{id:"hu",label:"HU",rel:"/hu"},{id:"ru",label:"RU",rel:"/ru"}],lang:null};var t=document.querySelector("html").getAttribute("lang");e.model.lang=e.model.langs.filter(function(e){return e.id==t})[0],e.changeLang=function(e){n(e)}}]),module.directive("app",[function(){function e(e,n,t){n.addClass("app")}return{restrict:"A",link:e,scope:!1,controller:["$scope",function(e){}]}}]),module.directive("spoke",["$compile",function(e){function n(n,t,o){function a(){n.canvas.width=t[0].offsetWidth,n.canvas.height=t[0].offsetHeight,n.draw(),angular.element(document.querySelector(".inputs")).css({position:"absolute",bottom:"16px",left:"50px",color:"rgba(255,255,255,0.7)","font-family":"'Roboto Slab',serif"}),t.find("input").css({"background-color":"rgba(0,0,0,0)",border:"1px solid currentColor",width:"50px","text-align":"center"})}t.addClass("spoke"),t.css({width:"100%",height:"300px"}),t.html('<canvas id="spoke-'+n.$id+'" class="canvas"></canvas><span class="title">The Spoke</span><div class="inputs"><label class="l l2" ng-show="spoke.a != 0">L: <input ng-model="spoke.l2" ng-change="draw()" type="number" min="40" max="1000">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="l l1" ng-show="spoke.a == 0">L: <input ng-model="spoke.l1" ng-change="draw()" type="number" min="40" max="1000">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="d">D: <input ng-model="spoke.d0" ng-change="draw()" type="number" min="2.5" max="4.5" step="0.5">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="a">A: <input ng-model="spoke.a" ng-change="draw()" type="number" min="0" max="120">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="b" ng-show="spoke.a!=0">B: <input ng-model="spoke.n" ng-change="draw()" type="number" min="3" max="30">&nbsp;mm</label> </div>'),e(t.contents())(n),n.canvas=t.find("canvas")[0],n.$on("$destroy",function(){angular.element(window).off("resize",a)}),angular.element(window).on("resize",a),a()}return{restrict:"A",link:n,scope:{},controller:["$scope",function(e){function n(){var e=document.createElement("div");e.style.width="1in",document.body.appendChild(e);var n=e.offsetWidth;return document.body.removeChild(e),n}function t(e,t){function i(e,n,t,o){var i,e,n,r,d,s,c,p,m,u,h,f,g,b,x=3.8,w={},v=t.t/2*x/(t.tn+1);for(T.moveTo(e,n),T.lineWidth=1,i=1;i<2*t.tn+1;i++)r=v,d=t.t0*x*(i%2),e+=r,T.lineTo(e,n-d);for(e=e+t.l*x-t.t*x,T.lineTo(e,n+d),u=t.r*x,h=(t.r+t.d0)*x,s=p=e,c=m=n-u,f=l(90),b=!0,g=l(90-t.a),T.arc(s,c,u,f,g,b),w=a(s,c,e,n,l(t.a),b),s=w.x,c=w.y,w=a(s,c,s+t.n*x,c,l(t.a),b),T.lineTo(w.x,w.y),e=s+t.f*x+t.n*x,n=c-t.f*x,w=a(s,c,e,n,l(t.a),b),T.lineTo(w.x,w.y),n=n+t.f*x+t.d0*x+t.f*x,w=a(s,c,e,n,l(t.a),b),T.lineTo(w.x,w.y),e-=t.f*x,n-=t.f*x,w=a(s,c,e,n,l(t.a),b),T.lineTo(w.x,w.y),e-=t.n*x,w=a(s,c,e,n,l(t.a),b),T.lineTo(w.x,w.y),f=l(90),b=!0,g=l(90-t.a),T.arc(p,m,h,g,f,!b),e=p,n=m+h,e=e-t.l*x+t.t*x,T.lineTo(e,n+d),i=1;i<2*t.tn+1;i++)r=v,d=t.t0*x*(i%2),e-=r,T.lineTo(e,n+d)}var r,d,s,c,p,m,u,h,f,g,b,x,w=n()/25.4;0===t.a&&(t.l2=t.l1),t.l2>(e.width-200)/w?(t.l=(e.width-200)/w,h=!0):(t.l=t.l2,h=!1),0===t.a?(t.l-=t.n+t.f,f=!0):f=!1,r=50,d=150;var T=e.getContext("2d");T.clearRect(0,0,e.width,e.height),T.strokeStyle="#ffffff",T.lineWidth=1,T.setLineDash([]),T.beginPath(),i(r,d,t,f),T.closePath();var v=o(T);T.fillStyle=v,T.fill(),T.stroke();var y="#054f79";h&&(T.beginPath(),T.strokeStyle=y,T.lineWidth=1,r=50+t.l*w/2,d=150,T.moveTo(r,d),d-=1,T.lineTo(r,d),r+=20,T.lineTo(r,d),r+=t.d0*w/2,d+=t.d0*w/2+1,T.lineTo(r,d),r-=t.d0*w/2,d+=t.d0*w/2+1,T.lineTo(r,d),r-=20,T.lineTo(r,d),r+=t.d0*w/2,d-=t.d0*w/2-1,T.lineTo(r,d),r-=t.d0*w/2,d-=t.d0*w/2-1,T.lineTo(r,d),T.stroke(),T.fillStyle=y,T.fill(),T.closePath(),T.beginPath(),T.strokeStyle="white",T.lineWidth=1,r=50+t.l*w/2+20,d=150,T.moveTo(r,d),r+=t.d0*w/2,d+=t.d0*w/2,T.lineTo(r,d),r-=t.d0*w/2,d+=t.d0*w/2,T.lineTo(r,d),r-=20,T.moveTo(r,d),r+=t.d0*w/2,d-=t.d0*w/2,T.lineTo(r,d),r-=t.d0*w/2,d-=t.d0*w/2,T.lineTo(r,d),T.stroke(),T.closePath()),T.beginPath(),T.strokeStyle="rgba(255,255,255,0.3)",T.lineWidth=1,r=50,d=150,c=d+t.d0*w+30,T.moveTo(r,c),f?(s=r+(t.l+t.n+t.f)*w,T.lineTo(s,c)):(s=r+t.l*w,T.lineTo(s,c)),c-=5,T.moveTo(r,c),c+=10,T.lineTo(r,c),c-=10,T.moveTo(s,c),c+=10,T.lineTo(s,c),f||(r+=t.l*w,d=d+t.d0*w+30,s=p=r,m=d,c=d-(t.d0+t.r)*w-30,u=a(s,c,r,d,l(t.a),!0),T.moveTo(u.x,u.y),r+=t.n*w,u=a(s,c,r,d,l(t.a),!0),T.lineTo(u.x,u.y),r=p,d=m-5,u=a(s,c,r,d,l(t.a),!0),T.moveTo(u.x,u.y),r=p,d=m+5,u=a(s,c,r,d,l(t.a),!0),T.lineTo(u.x,u.y),r=p+t.n*w,d=m-5,u=a(s,c,r,d,l(t.a),!0),T.moveTo(u.x,u.y),d=m+5,u=a(s,c,r,d,l(t.a),!0),T.lineTo(u.x,u.y)),T.stroke(),T.closePath(),T.beginPath(),T.strokeStyle="rgba(255,255,255,0.3)",T.lineWidth=1,T.setLineDash([4,4]),r=50,d=150,T.moveTo(r,d+t.d0*w),T.lineTo(r,d+t.d0*w+30),f?(s=r+(t.l+t.n+t.f)*w,T.moveTo(s,d+t.d0*w),T.lineTo(s,d+t.d0*w+30)):(s=r+t.l*w,T.moveTo(s,d+t.d0*w),T.lineTo(s,d+t.d0*w+50),r+=t.l*w,d+=t.d0*w,s=p=r,m=d,c=d-(t.d0+t.r)*w,g=l(90),x=!0,b=l(90-t.a),T.arc(s,c,(t.d0+t.r)*w+50,g,b,x),u=a(s,c,r,d,l(t.a),!0),T.moveTo(u.x,u.y),u=a(s,c,r,d+50,l(t.a),!0),T.lineTo(u.x,u.y),u=a(s,c,r+t.n*w,d+30,l(t.a),!0),T.moveTo(u.x,u.y),u=a(s,c,r+t.n*w,d,l(t.a),!0),T.lineTo(u.x,u.y)),T.stroke(),T.closePath()}function o(e){var n,t=document.createElement("canvas"),o=5,a=5;for(document.body.appendChild(t),t.width=20,t.height=20,n=t.getContext("2d"),n.beginPath(),n.strokeStyle="rgba(255,255,255,0.2)";a<2*t.width;)n.moveTo(a,0),n.lineTo(0,a),a+=o;n.stroke(),n.closePath();var l=e.createPattern(t,"repeat");return document.body.removeChild(t),l}function a(e,n,t,o,a,l){var i={x:null,y:null},r=t-e,d=o-n,s=Math.cos(a),c=Math.sin(a);return l?(i.x=r*s+d*c,i.y=d*s+r*c*-1):(i.x=r*s-d*c,i.y=d*s+r*c),i.x+=e,i.y+=n,i}function l(e){return e*(Math.PI/180)}e.spoke={l:null,l1:210,l2:200,n:10,d0:4,d1:4,a:45,t:20,tn:16,t0:.6,b1:0,b2:0,r:1,f:1.5},e.draw=function(){t(e.canvas,e.spoke)}}]}}]),function(){"use strict";angular.module("app",["app-module"]);angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}();