var paralax_module=angular.module("paralax",[]);paralax_module.directive("paralaxTrack",["$rootScope","$timeout",function(e,t){function n(e,n,l){function r(){var l=n[0],r=l.getBoundingClientRect(),d=window.innerHeight,u=angular.copy(f);f.top=r.top,f.topPercent=r.top/d*100,f.bottom=r.bottom,f.bottomPercent=r.bottom/d*100,f.isIn=f.topPercent>=0&&f.topPercent<100||f.bottomPercent>=0&&f.bottomPercent<100||f.topPercent<=0&&f.bottomPercent>100,f.middle=r.top+(r.bottom-r.top)/2,f.middlePercent=f.middle/d*100,f.inPercent=r.bottom/(d+r.height)*100,f.height=l.clientHeight,f.isIn?i():n.hasClass(o.paralaxIn)&&c(),s(f),angular.equals(u,f)||(e.$broadcast(a.change,f),t(function(){angular.copy(f,e.paralax)}))}function i(){c(),f.isIn&&(n.addClass(o.paralaxIn),n.addClass(o.paralaxIn+"-"+(0|f.inPercent))),f.topPercent>0&&f.topPercent<100&&(n.addClass(o.paralaxTopIn),n.addClass(o.paralaxTopIn+"-"+(0|f.topPercent))),f.bottomPercent>0&&f.bottomPercent<100&&(n.addClass(o.paralaxBottomIn),n.addClass(o.paralaxBottomIn+"-"+(0|f.bottomPercent)))}function c(){var e,t,a,l=n[0];for(e=l.className.split(" "),a=e.length-1;a>=0;a--)t=e[a],0!==t.indexOf(o.paralaxIn)&&0!==t.indexOf(o.paralaxTopIn)&&0!==t.indexOf(o.paralaxBottomIn)||e.splice(a,1);l.className=e.join(" ")}function s(e){n[0].querySelectorAll("[paralax-layer]").forEach(function(t){var n,o=parseInt(t.getAttribute("paralax-layer"))/100,a=0,l=t.getAttribute("paralax-size"),r=t.getAttribute("paralax-offset");"window"==l&&(t.style.height=window.innerHeight+"px"),r&&("%"==r.charAt(r.length-1)?a=parseFloat(r)/100:"x"==r.charAt(r.length-1)&&(a=parseFloat(r)/window.innerHeight)),n=(window.innerHeight-e.height)*a,t.style.transform="translate3d(0px, "+((e.top-n)*o+"px")+", 0px)"})}function d(){p&&(p=!1,r()),m(d)}function u(e){p=!0}n.addClass("paralaxTrack");var p=!1,m=window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),f={};m(d),window.addEventListener?window.addEventListener("scroll",u,!1):el.attachEvent&&window.attachEvent("onscroll",u)}var o={paralaxIn:"px-in",paralaxTopIn:"px-top-in",paralaxBottomIn:"px-bottom-in"},a={change:"paralaxChange"};return{restrict:"A",link:n,scope:!0,controller:["$scope",function(t){e.paralax=e.paralax||{move:function(e,t){var n=document.getElementById(t),o=n.getBoundingClientRect();window.scrollTo(0,o.top)}}}]}}]);var module=angular.module("app-module",["paralax"]);module.controller("mainCtrl",["$scope","$filter","$location","$translate","$routeParams",function(e,t,n,o,a){function l(e){var t=[];e&&t.push(e),n.path(t.join("/"))}function r(){var t=a.lang||"en";e.model.lang=e.model.langs.filter(function(e){return e.id==t})[0],document.querySelector("html").setAttribute("lang",t),o.use(t),i(t)}function i(e){document.querySelector('[property="og:url"]').setAttribute("content",window.location.href),o("HEAD_TITLE").then(function(e){document.title=e,document.querySelector('[property="og:title"]').setAttribute("content",e)},function(e){document.title="",document.querySelector('[property="og:title"]').setAttribute("content","")}),o("HEAD_DESCR").then(function(e){document.querySelector('[name="description"]').setAttribute("content",e),document.querySelector('[property="og:description"]').setAttribute("content",e)},function(e){document.querySelector('[name="description"]').setAttribute("content",""),document.querySelector('[property="og:description"]').setAttribute("content","")}),o("HEAD_KEYWORDS").then(function(e){document.querySelector('[name="keywords"]').setAttribute("content",e)},function(e){document.querySelector('[name="keywords"]').setAttribute("content","")})}e.model={langs:[{id:"en",label:"EN"},{id:"hu",label:"HU"},{id:"ru",label:"RU"}],lang:null},e.$on("$routeChangeSuccess",function(){r()}),e.changeLang=function(e){l(e)},r()}]),module.directive("app",[function(){function e(e,t,n){t.addClass("app")}return{restrict:"A",link:e,scope:!1,controller:["$scope",function(e){}]}}]),module.directive("spoke",["$compile",function(e){function t(t,n,o){function a(){t.canvas.width=n[0].offsetWidth,t.canvas.height=n[0].offsetHeight,t.draw(),angular.element(document.querySelector(".inputs")).css({position:"absolute",bottom:"16px",left:"50px",color:"rgba(255,255,255,0.7)","font-family":"'Roboto Slab',serif"}),n.find("input").css({"background-color":"rgba(0,0,0,0)",border:"1px solid currentColor",width:"50px","text-align":"center"})}n.addClass("spoke"),n.css({width:"100%",height:"300px"}),n.html('<canvas id="spoke-'+t.$id+'" class="canvas"></canvas><span class="title">The Spoke</span><div class="inputs"><label class="l l2" ng-show="spoke.a != 0">L: <input ng-model="spoke.l2" ng-change="draw()" type="number" min="40" max="1000">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="l l1" ng-show="spoke.a == 0">L: <input ng-model="spoke.l1" ng-change="draw()" type="number" min="40" max="1000">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="d">D: <input ng-model="spoke.d0" ng-change="draw()" type="number" min="2.5" max="4.5" step="0.5">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="a">A: <input ng-model="spoke.a" ng-change="draw()" type="number" min="0" max="120">&nbsp;mm&nbsp;&nbsp;&nbsp;</label> <label class="b" ng-show="spoke.a!=0">B: <input ng-model="spoke.n" ng-change="draw()" type="number" min="3" max="30">&nbsp;mm</label> </div>'),e(n.contents())(t),t.canvas=n.find("canvas")[0],t.$on("$destroy",function(){angular.element(window).off("resize",a)}),angular.element(window).on("resize",a),a()}return{restrict:"A",link:t,scope:{},controller:["$scope",function(e){function t(){var e=document.createElement("div");e.style.width="1in",document.body.appendChild(e);var t=e.offsetWidth;return document.body.removeChild(e),t}function n(e,n){function r(e,t,n,o){var r,e,t,i,c,s,d,u,p,m,f,h,g,b,x=3.8,y={},v=n.t/2*x/(n.tn+1);for(w.moveTo(e,t),w.lineWidth=1,r=1;r<2*n.tn+1;r++)i=v,c=n.t0*x*(r%2),e+=i,w.lineTo(e,t-c);for(e=e+n.l*x-n.t*x,w.lineTo(e,t+c),m=n.r*x,f=(n.r+n.d0)*x,s=u=e,d=p=t-m,h=l(90),b=!0,g=l(90-n.a),w.arc(s,d,m,h,g,b),y=a(s,d,e,t,l(n.a),b),s=y.x,d=y.y,y=a(s,d,s+n.n*x,d,l(n.a),b),w.lineTo(y.x,y.y),e=s+n.f*x+n.n*x,t=d-n.f*x,y=a(s,d,e,t,l(n.a),b),w.lineTo(y.x,y.y),t=t+n.f*x+n.d0*x+n.f*x,y=a(s,d,e,t,l(n.a),b),w.lineTo(y.x,y.y),e-=n.f*x,t-=n.f*x,y=a(s,d,e,t,l(n.a),b),w.lineTo(y.x,y.y),e-=n.n*x,y=a(s,d,e,t,l(n.a),b),w.lineTo(y.x,y.y),h=l(90),b=!0,g=l(90-n.a),w.arc(u,p,f,g,h,!b),e=u,t=p+f,e=e-n.l*x+n.t*x,w.lineTo(e,t+c),r=1;r<2*n.tn+1;r++)i=v,c=n.t0*x*(r%2),e-=i,w.lineTo(e,t+c)}var i,c,s,d,u,p,m,f,h,g,b,x,y=t()/25.4;0===n.a&&(n.l2=n.l1),n.l2>(e.width-200)/y?(n.l=(e.width-200)/y,f=!0):(n.l=n.l2,f=!1),0===n.a?(n.l-=n.n+n.f,h=!0):h=!1,i=50,c=150;var w=e.getContext("2d");w.clearRect(0,0,e.width,e.height),w.strokeStyle="#ffffff",w.lineWidth=1,w.setLineDash([]),w.beginPath(),r(i,c,n,h),w.closePath();var v=o(w);w.fillStyle=v,w.fill(),w.stroke();var T="#054f79";f&&(w.beginPath(),w.strokeStyle=T,w.lineWidth=1,i=50+n.l*y/2,c=150,w.moveTo(i,c),c-=1,w.lineTo(i,c),i+=20,w.lineTo(i,c),i+=n.d0*y/2,c+=n.d0*y/2+1,w.lineTo(i,c),i-=n.d0*y/2,c+=n.d0*y/2+1,w.lineTo(i,c),i-=20,w.lineTo(i,c),i+=n.d0*y/2,c-=n.d0*y/2-1,w.lineTo(i,c),i-=n.d0*y/2,c-=n.d0*y/2-1,w.lineTo(i,c),w.stroke(),w.fillStyle=T,w.fill(),w.closePath(),w.beginPath(),w.strokeStyle="white",w.lineWidth=1,i=50+n.l*y/2+20,c=150,w.moveTo(i,c),i+=n.d0*y/2,c+=n.d0*y/2,w.lineTo(i,c),i-=n.d0*y/2,c+=n.d0*y/2,w.lineTo(i,c),i-=20,w.moveTo(i,c),i+=n.d0*y/2,c-=n.d0*y/2,w.lineTo(i,c),i-=n.d0*y/2,c-=n.d0*y/2,w.lineTo(i,c),w.stroke(),w.closePath()),w.beginPath(),w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,i=50,c=150,d=c+n.d0*y+30,w.moveTo(i,d),h?(s=i+(n.l+n.n+n.f)*y,w.lineTo(s,d)):(s=i+n.l*y,w.lineTo(s,d)),d-=5,w.moveTo(i,d),d+=10,w.lineTo(i,d),d-=10,w.moveTo(s,d),d+=10,w.lineTo(s,d),h||(i+=n.l*y,c=c+n.d0*y+30,s=u=i,p=c,d=c-(n.d0+n.r)*y-30,m=a(s,d,i,c,l(n.a),!0),w.moveTo(m.x,m.y),i+=n.n*y,m=a(s,d,i,c,l(n.a),!0),w.lineTo(m.x,m.y),i=u,c=p-5,m=a(s,d,i,c,l(n.a),!0),w.moveTo(m.x,m.y),i=u,c=p+5,m=a(s,d,i,c,l(n.a),!0),w.lineTo(m.x,m.y),i=u+n.n*y,c=p-5,m=a(s,d,i,c,l(n.a),!0),w.moveTo(m.x,m.y),c=p+5,m=a(s,d,i,c,l(n.a),!0),w.lineTo(m.x,m.y)),w.stroke(),w.closePath(),w.beginPath(),w.strokeStyle="rgba(255,255,255,0.3)",w.lineWidth=1,w.setLineDash([4,4]),i=50,c=150,w.moveTo(i,c+n.d0*y),w.lineTo(i,c+n.d0*y+30),h?(s=i+(n.l+n.n+n.f)*y,w.moveTo(s,c+n.d0*y),w.lineTo(s,c+n.d0*y+30)):(s=i+n.l*y,w.moveTo(s,c+n.d0*y),w.lineTo(s,c+n.d0*y+50),i+=n.l*y,c+=n.d0*y,s=u=i,p=c,d=c-(n.d0+n.r)*y,g=l(90),x=!0,b=l(90-n.a),w.arc(s,d,(n.d0+n.r)*y+50,g,b,x),m=a(s,d,i,c,l(n.a),!0),w.moveTo(m.x,m.y),m=a(s,d,i,c+50,l(n.a),!0),w.lineTo(m.x,m.y),m=a(s,d,i+n.n*y,c+30,l(n.a),!0),w.moveTo(m.x,m.y),m=a(s,d,i+n.n*y,c,l(n.a),!0),w.lineTo(m.x,m.y)),w.stroke(),w.closePath()}function o(e){var t,n=document.createElement("canvas"),o=5,a=5;for(document.body.appendChild(n),n.width=20,n.height=20,t=n.getContext("2d"),t.beginPath(),t.strokeStyle="rgba(255,255,255,0.2)";a<2*n.width;)t.moveTo(a,0),t.lineTo(0,a),a+=o;t.stroke(),t.closePath();var l=e.createPattern(n,"repeat");return document.body.removeChild(n),l}function a(e,t,n,o,a,l){var r={x:null,y:null},i=n-e,c=o-t,s=Math.cos(a),d=Math.sin(a);return l?(r.x=i*s+c*d,r.y=c*s+i*d*-1):(r.x=i*s-c*d,r.y=c*s+i*d),r.x+=e,r.y+=t,r}function l(e){return e*(Math.PI/180)}e.spoke={l:null,l1:210,l2:200,n:10,d0:4,d1:4,a:45,t:20,tn:16,t0:.6,b1:0,b2:0,r:1,f:1.5},e.draw=function(){n(e.canvas,e.spoke)}}]}}]),function(){"use strict";var e=angular.module("app",["ngRoute","ngSanitize","app-module","pascalprecht.translate"]);e.config(["$translateProvider","$routeProvider","$locationProvider",function(e,t,n){t.when("/:lang?",{templateUrl:"home.html"}).otherwise({redirectTo:"/"}),e.useStaticFilesLoader({prefix:"./data/",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("sanitizeParameters")}]),angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}();